<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>GoalGlow - dashboard</title>

    <!-- Favicon -->
    <link rel="icon" href="{{ url_for('static', filename='image/icon-progress.svg') }}" type="image/x-icon" />

    <!-- Bootstrap -->
    <link
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
    rel="stylesheet"
    crossorigin="anonymous"
    />
    <script
    src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
    crossorigin="anonymous"
    ></script>

    <!-- Google Font -->
    <link
    href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@500;700display=swap"
    rel="stylesheet"
    />

    <!-- External CSS -->
    <link rel="stylesheet" href="{{ url_for('static', filename='style/style.css') }}" />
</head>
<body class="dashboard-body">

<!-- Navbar -->
<nav class="navbar navbar-expand-lg navbar-dark bg-primary shadow-sm">
    <div class="container-fluid">
        <a class="navbar-brand fw-bold" href="#">GoalGlow</a>
        <div class="d-flex align-items-center ms-auto">
            <span class="text-white me-3">Welcome, {{ user_name }}!</span>
            <a href="{{ url_for('dashboard') }}" class="btn btn-outline-light btn-sm me-2">Home</a>
            <a href="{{ url_for('logout') }}" class="btn btn-outline-light btn-sm">Logout</a>
        </div>
    </div>
</nav>

<!-- Main Content -->
<div class="container mt-5">
    <div class="row justify-content-center">

        <!-- Career Planning Form -->
        <div class="col-lg-6 mb-4">
            <div class="card form-card animate__animated animate__fadeIn">
                <div class="card-header bg-primary text-white fw-bold">
                    Plan Your Career Path
                </div>
                <div class="card-body">
                    <form method="POST">
                        <div class="mb-3">
                            <label class="form-label fw-bold">Current Skills</label>
                            <input type="text" class="form-control" name="current_skills" placeholder="HTML, CSS, Python" value="{{ current_skills }}">
                        </div>
                        <div class="mb-3">
                            <label class="form-label fw-bold">Career Goal</label>
                            <select class="form-select" name="career_goal">
                                <option value="">-- Select Career Goal --</option>
                                {% for goal in goals %}
                                    <option value="{{ goal.id }}"
            {% if career_goal_id == goal.id|string %}selected{% endif %}>
            {{ goal.name }}
        </option>
                                {% endfor %}
                            </select>
                        </div>
                        <button type="submit" name="generate_roadmap" class="btn btn-primary w-100">Generate Roadmap</button>       
                    </form>
                </div>
            </div>
        </div>

        <!-- Results Section -->
        <div class="col-lg-8">
            {% if skill_gap is not none %}
                <!-- Skill Gaps -->
                <div class="card shadow-sm mb-4 roadmap-card">
                    <div class="card-header bg-warning fw-bold">Skill Gaps for {{ career_goal_name }}</div>
                    <div class="card-body">
                        {% if skill_gap %}
                            <ul>
                                {% for skill in skill_gap %}
                                    <li>{{ skill|capitalize}}</li>
                                {% endfor %}
                            </ul>
                        {% else %}
                            <p class="text-success fw-bold">âœ… You already have all the required skills!</p>
                        {% endif %}
                    </div>
                </div>

                <!-- Roadmap -->
                {% if roadmap %}
                <div class="card shadow-sm roadmap-card animate__animated animate__fadeInUp">
                    <div class="card-header bg-success text-white fw-bold">Your Personalized Roadmap</div>
                    <div class="card-body">
                       <!-- Progress Bar -->
{% if progress_percent %}
<div class="mb-3">
    <label class="form-label fw-bold">Your Progress:</label>
    <div class="progress">
        <div class="progress-bar" role="progressbar" style="width: {{ progress_percent }}%;" aria-valuenow="{{ progress_percent }}" aria-valuemin="0" aria-valuemax="100">{{ progress_percent }}%</div>
    </div>
</div>
{% endif %}

<ol class="roadmap-list">
    {% for item in roadmap %}
    <li class="mb-4 d-flex align-items-center justify-content-between">
        <div>
            <h5 class="text-primary">{{ item.skill | capitalize }}</h5>
            <!-- Learning Flow ... (keep your existing learning-stage blocks here) -->
            <div class="learning-stage">
                <strong>Beginner-Friendly Interactive Learning:</strong>
                <ul>
                    <li><a href="https://www.w3schools.com/{{ item.skill }}" target="_blank">W3Schools</a></li>
                    <li><a href="https://www.freecodecamp.org/learn" target="_blank">FreeCodeCamp</a></li>
                    <li><a href="https://www.codecademy.com/catalog/language/{{ item.skill }}" target="_blank">Codecademy</a></li>
                    <li><a href="https://www.sololearn.com/en/learn/{{ item.skill }}" target="_blank">SoloLearn</a></li>
                </ul>
            </div>
            <div class="learning-stage">
                <strong>Authoritative & In-Depth References:</strong>
                <ul>
                    <li><a href="https://developer.mozilla.org/en-US/docs/Web/{{ item.skill }}" target="_blank">MDN Web Docs</a></li>
                    <li><a href="https://www.geeksforgeeks.org/{{ item.skill }}" target="_blank">GeeksforGeeks</a></li>
                    <li><a href="https://www.tutorialspoint.com/{{ item.skill }}/index.htm" target="_blank">TutorialsPoint</a></li>
                </ul>
            </div>
            <div class="learning-stage">
                <strong>Full-Stack & Project-Based Learning:</strong>
                <ul>
                    <li><a href="https://www.theodinproject.com" target="_blank">The Odin Project</a></li>
                    <li><a href="https://scrimba.com" target="_blank">Scrimba</a></li>
                    <li><a href="https://www.educative.io" target="_blank">Educative.io</a></li>
                </ul>
            </div>
        </div>
        <div>
            {% if item.completed %}
                <span class="badge bg-success">Completed</span>
            {% else %}
                <form method="post" style="display:inline;">
                    <input type="hidden" name="complete_skill" value="{{ item.skill|lower }}">
                    <button type="submit" class="btn btn-sm btn-outline-primary">Mark as Completed</button>
                </form>
            {% endif %}
        </div>
    </li>
    {% endfor %}
</ol>
                    </div>
                </div>
                {% endif %}
            {% endif %}
        </div>

    </div>
</div>

<!-- Footer -->
<footer class="footer">
    <p>&copy; 2025 GoalGlow. All Rights Reserved.</p>
</footer>

</body>
</html>
